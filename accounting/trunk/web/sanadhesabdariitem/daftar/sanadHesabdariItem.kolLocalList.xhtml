
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	
	
	xmlns:custom="http://seraj.com/seraj/facelet"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	xmlns:p="http://primefaces.org/ui">


<ui:composition template="/template/template-list.xhtml">
	<ui:param name="title" value="daftarKol" />
	<ui:param name="owner" value="#{sanadHesabdariItem}" />
	<ui:param name="searchpage"
		value="/sanadhesabdariitem/daftar/sanadHesabdariItem.daftarKolExampleForm.xhtml" />

	<ui:define name="saveStateSction">
		<t:saveState value="#{owner.rowsPerPage}" />
		<t:saveState value="#{owner.currentPage}" />
		<t:saveState value="#{owner.example}" />
		<t:saveState value="#{owner.filter}" />
		<t:saveState value="#{owner.sortType}" />
		<t:saveState value="#{owner.sortCol}" />
		<t:saveState value="#{owner.searchAction}" />
		<t:saveState value="#{owner.useCase}" />
		<t:saveState value="#{owner.dataModel.page}" />
		<t:saveState value="#{owner.uniqueGUID}" />
		<t:saveState value="#{owner.device}" />
		<t:saveState value="#{owner.hesabKolIds}" />
		<t:saveState value="#{owner.moeenIds}" />
		<t:saveState value="#{owner.tafsiliIds}" />
		<t:saveState value="#{owner.searchBySaalMaali}" />
		<t:saveState value="#{owner.saalMaaliId}" />

	</ui:define>
	<ui:define name="topSection">
<link href="${request.contextPath}/js/dhtmlxSuite_v508_pro_eval/skins/material/dhtmlx.css" rel="stylesheet" type="text/css" />	

		<style>
.ui-shadow {
	box-shadow: 0 5px 10px rgba(0, 0, 0, 0);
}
</style>
		<t:div id="topsectiondiv" style="text-align:center">
			<h:panelGroup id="topsection" style="font-family: tahoma;">
				<h:commandButton action="#{owner.exportToExcel}"
					styleClass=" gwt-Button" value="#{messages['common_excel']}"
					rendered="#{owner.exportable}" image="/images/excelBtn.png" />


				<h:commandButton
					onclick="document.getElementById('mandehAzGhablPanel').style.display = 'block';  return false;"
					styleClass=" gwt-Button"
					style="font-family:tahoma;font-size:12px cursor: pointer;text-align:center;"
					value="#{messages['common_print']}" immediate="true"
					image="/images/print.png" />

	

				<h:commandButton action="#{owner.goTodDftarRooznamehLocalList}"
					styleClass=" gwt-Button"
					image="/images/buttons/btn_daftarRooznameh.png"
					style="font-family:tahoma;font-size:12px cursor: pointer;text-align:center;"
					value="#{messages['common_print']}">
				</h:commandButton>

				<h:commandButton action="#{owner.goToTafsiliLocalList}"
					styleClass=" gwt-Button"
					image="/images/buttons/btn_daftarTafsili.png"
					style="font-family:tahoma;font-size:12px cursor: pointer;text-align:center;"
					value="#{messages['common_print']}">
				</h:commandButton>

				<h:commandButton action="#{owner.goToMoeenLocalList}"
					styleClass=" gwt-Button"
					image="/images/buttons/btn_daftarMoeen.png"
					style="font-family:tahoma;font-size:12px cursor: pointer;text-align:center;"
					value="#{messages['common_print']}">
				</h:commandButton>

				<h:commandButton action="#{owner.goToKolLocalList}"
					styleClass=" gwt-Button" image="/images/buttons/btn_daftarKol.png"
					style="font-family:tahoma;font-size:12px cursor: pointer;text-align:center;"
					value="#{messages['common_print']}">
				</h:commandButton>
			</h:panelGroup>
		</t:div>
		<p:sticky target="topsectiondiv" />
	</ui:define>

	<ui:define name="listsection">
	<style>
		.even{
			background-color:white;
		}
		.uneven{
			background-color:#f9f9f9;
		}
		div.gridbox_material.gridbox table.obj tr td{
			font-family:yekan!important;
			font-size:12px!important;
		}
		div.gridbox_material.gridbox table.hdr td div.hdrcell{
			font-family:yekan!important;
			font-size:12px!important;
		}
		div.gridbox_material.gridbox table.obj.row20px tr.rowselected td{
			font-family:yekan!important;
			font-size:12px!important;
		}
		div.gridbox_material.gridbox table.obj.row20px tr td{
			font-family:yekan!important;
			font-size:12px!important;
		}
		
		table.hdr{
			margin-left: 20px!important;
			padding-left: 20px!important;
			margin-right: 0px!important;
			padding-right: 0px!important;			
		}

		div.gridbox_material.gridbox table.hdr tr:nth-child(2) td{
			text-align: right!important;
		}
		
		div.gridbox table{
			direction:RTL;
		}
		div.gridbox_material.gridbox .xhdr {
			background-color: #f4f4f4;
			border-bottom: 2px solid #53abe6;
		}		
	</style>	
		<h:inputHidden value="#{owner.daftarKolJsonList}" id="daftarKolJsonList" />
		<div id="gridbox" style="direction:rtl; width:100%;height:500px; background-color:white;"></div>		
		<script>
			var myGrid;
			function createGrid(){
				debugger;
				if(myGrid)
					myGrid.destructor();
				myGrid = new dhtmlXGridObject('gridbox');
				myGrid.setImagePath("${request.contextPath}/js/dhtmlxSuite_v508_pro_eval/skins/terrace/imgs/dhxgrid_terrace/");
				//myGrid.setSkin('Material');
				myGrid.setHeader("&nbsp;,entityId,#{messages['SanadHesabdari_tempSerial']}, #{messages['SanadHesabdari_serial']}, #{messages['SanadHesabdari_tarikhSanad']},#{messages['SanadHesabdariItem_hesabKol']},#{messages['HesabKol_code']},#{messages['SanadHesabdariItem_description']},#{messages['SanadHesabdariItem_bedehkar']},#{messages['SanadHesabdariItem_bestankar']},#{messages['SanadHesabdariItem_mandeh']}, &nbsp;");
				myGrid.setInitWidths("30,1,65,60,65,150,50,*,90,90,90,30");
				myGrid.enableAutoWidth(true);
				myGrid.enableAutoHeight(true);
				myGrid.setColAlign("right,right,left,left,left,left,left,left,left,left,left,left");
				myGrid.setColTypes("ro,ro,ro,ro,ro,ro,ro,ro,ro,ro,ro,ro");
				myGrid.setColumnColor("#CCE2FE");
				myGrid.setNumberFormat("0,000.00",0,".",","); 
				//myGrid.attachFooter("aaaaaaaaaaaaaaaaaaaaaaaaaaa");
				myGrid.csv.cell=';';
				//myGrid.setColSorting("int,str,str");
				myGrid.attachEvent("onRowDblClicked",doOnRowSelect);
				myGrid.setColumnHidden(1,true);
				myGrid.enableMultiline(true);
				dhtmlxEvent(window, "resize", function () { myGrid.setSizes(); });
				myGrid.init();
				myGrid.splitAt(1);
				myGrid.enableLightMouseNavigation(true);
				//myGrid.load($$('#daftarKolJsonList'),"json");
				myGrid.enableAlterCss("even","uneven");
				myGrid.parse($$('#daftarKolJsonList').val(),"csv");
				$$('#daftarKolJsonList').val("");
			}		
			
			function doOnRowSelect(rowId){
				debugger;
				//var row = myGrid.getRowData(rowId);
				var cell = myGrid.cellById(rowId,1);
				viewSanad(cell.getValue());
			}
		</script>
		<p:panel id="mandehAzGhablPanel"
			style="z-index:1;display:none;border: #6694E3 3px solid; left:30%;top:5%;width:50%;max-height:90%;overflow: scroll;background-color:#F3F3F3;position:fixed">
			<p:panelGrid columns="2" layout="grid" width="90%"
				columnClasses="viewLableColResponsive ui-grid-col-3,inputCol ui-grid-col-9" styleClass="inputForm  ">
				<h:outputLabel
					value="#{messages['SanadHesabdari_MandehAzGhabl_Is_Calculate']} :" />
				<p:selectBooleanCheckbox
					label="#{messages['SanadHesabdari_MandehAzGhabl_Is_Calculate']}"
					value="#{owner.isCalculateMandehAzGhabl}" />
			</p:panelGrid>

			<h:commandButton styleClass=" gwt-Button"
				value="#{messages['common_print']}" action="#{owner.printDaftarKol}"
				image="/images/pdfBtn.png" />

			<h:commandButton
				onclick="hideLoading(); closeFoodReportDiv(); return false;"
				styleClass=" gwt-Button" image="/images/buttons/btn_return.png"
				immediate="true" />
		</p:panel>

		<p:panel id="successfullActionRendered"
			style="z-index:1;display:none;">
			<script>
					function closeFoodReportDiv() {
						hideGlassyDiv();
						document.getElementById('mandehAzGhablPanel').style.display = 'none';
						return false;
					}
				</script>
		</p:panel>


		<script>
	function viewSanad(sanadID){
			var height = screen.height-screen.height/8;
			var width = screen.width;
			features ="height="+height +",width="+width +",status=yes,toolbar=no,menubar=no,location=no, scrollbars=yes";
			link ="../../sanadhesabdari/sanadHesabdari.view.V2.jsf?entityId="+sanadID;
			popupFullscreen(link,'viewSanad');
		}
	</script>
	</ui:define>
	<ui:define name="buttonsection">

	</ui:define>
</ui:composition>
</html>